如果檔案第一行非空行不是 pb tag
新增第一行為 volpage pb tag

把所有檔案合起來

按照 volpage 分開

尋找每個 volpage 的 vol n
如果沒有 vol n
抱錯

(1) 第一條路 有 bampo tag

如果一整個 volpage 都沒有 bampo tag
報錯

從 bampo page 的 pb tag 切割文件

命名以最後一個 bampo n 為準

未到第一個 bampo page 的文字部分
if
第一個 bampo page 有兩個以上的 bampo tag
以第一個 bampo n 命名
else
如果第一個 bampo page 只有一個 bampo tag
則和下一個 bampo 合併

(2) 第二條路 沒有 bampo tag

如果全部文件都沒有 sutra tag
報錯

用 sutra page 的 pb tag 切割文件

命名以最後一個 sutra id 為準

未到第一個 sutra page 的文字部分
以第一個 sutra page 的第一個 sutra id 命名

用 pb id 切割
最多每 20 個 page 是一個 bampo